(this.webpackJsonpspeait_front=this.webpackJsonpspeait_front||[]).push([[0],{67:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n(0),a=n(17),s=n.n(a),o=n(10),i=n(14),u=n(3),j=n.n(u),l=n(5),d=n(37),p=n(15),b=n.n(p),h="/api/posts",m=null,O=function(){var t=Object(l.a)(j.a.mark((function t(e){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:m}},t.next=3,b.a.post(h,e,n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f={getAll:function(){var t=Object(l.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get(h);case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),createPost:O,comment:function(){var t=Object(l.a)(j.a.mark((function t(e,n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("".concat(h,"/").concat(e.id,"/comments"),n);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),setToken:function(t){m="bearer ".concat(t)}},x=function(){return function(){var t=Object(l.a)(j.a.mark((function t(e){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getAll();case 2:n=t.sent,e({type:"POSTS_INIT",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(t,e){return function(){var n=Object(l.a)(j.a.mark((function n(r){var c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.comment(t,e);case 2:c=n.sent,r({type:"UPDATE",newPost:c});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"POSTS_INIT":return e.data;case"CREATE":return[].concat(Object(d.a)(t),[e.postToAdd]);case"DELETE":return t.filter((function(t){return e.id!==t.id}));case"UPDATE":return t.map((function(t){return e.newPost.id!==t.id?t:e.newPost}));default:return t}},w=function(){var t=Object(o.b)();Object(c.useEffect)((function(){t(x())}),[t]);var e=Object(o.c)((function(t){return t.posts}));return Object(r.jsx)("div",{className:"postCollection",children:e.sort((function(t,e){return Date.parse(e.date)-Date.parse(t.date)})).map((function(t){var e=t.content.substring(0,30);return Object(r.jsxs)("div",{className:"postBody",children:[Object(r.jsx)("h3",{children:t.title}),Object(r.jsx)("h5",{children:t.date}),Object(r.jsxs)("p",{children:[e.substring(1),"... ",Object(r.jsx)(i.b,{to:"/posts/".concat(t.id),children:"show more"})]})]},t.id)}))})},y=n(4),T=n(34),N=n.n(T),E=function(t){var e=t.post,n=Object(o.b)();Object(c.useEffect)((function(){n(x())}),[n]);var a=function(){var t=Object(l.a)(j.a.mark((function t(r){var c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),c=r.target.comment.value,a=r.target.author.value,r.target.author.value="",r.target.comment.value="",n(v(e,{text:c,author:a}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return void 0!==e?Object(r.jsxs)("div",{className:"postBody",children:[Object(r.jsxs)("div",{className:"postTitles",children:[Object(r.jsx)("h2",{children:e.title}),Object(r.jsx)("h3",{children:Object(r.jsxs)("em",{children:["By: ",e.author]})})]}),Object(r.jsx)("div",{className:"postContent",dangerouslySetInnerHTML:{__html:N()(e.content)}}),Object(r.jsx)("div",{className:"postComments",children:e.comments.map((function(t){return Object(r.jsxs)("div",{className:"commentBody",children:[Object(r.jsxs)("p",{className:"commentAuthor",children:[" ",t.author," Says: "]}),Object(r.jsx)("p",{className:"commentText",children:t.text},t.id)]},t.id)}))}),Object(r.jsxs)("form",{className:"postForm",onSubmit:a,children:["Your name: ",Object(r.jsx)("br",{})," ",Object(r.jsx)("input",{name:"author"}),"Comment: ",Object(r.jsx)("br",{}),Object(r.jsx)("textarea",{name:"comment"}),Object(r.jsx)("button",{type:"submit",children:" Comment "})]})]}):Object(r.jsx)("div",{children:Object(r.jsx)("img",{className:"loadingImage",src:"https://ichef.bbci.co.uk/news/976/cpsprodpb/41CF/production/_109474861_angrycat-index-getty3-3.jpg"})})},A="HEXADECIMAL_USERNAME",I="HEXADECIMAL_TOKEN",k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN":return e.data;case"LOGOUT":return null;default:return t}},S=function(){var t=Object(o.c)((function(t){return t.user}));return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{className:"postForm",onSubmit:function(e){e.preventDefault();var n=e.target.posttext.value,r=e.target.title.value,c=t.username,a=t.token;e.target.title.value="",e.target.posttext.value="";var s={content:n,title:r,author:c};f.setToken(a),f.createPost(s)},children:[Object(r.jsx)("input",{name:"title"}),Object(r.jsx)("textarea",{name:"posttext"}),Object(r.jsx)("button",{type:"submit",children:" Publish! "})]})})},D=n.p+"static/media/Feed-icon.1021a409.png";var P=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.posts}));Object(c.useEffect)((function(){t(function(){var t=window.localStorage.getItem(A),e=window.localStorage.getItem(I);return null!==t&&null!==e?{type:"LOGIN",data:{username:t,token:e}}:{type:"LOGOUT"}}())}),[t]);var n=Object(y.f)("/posts/:id"),a=n&&void 0!==e?e.find((function(t){return t.id===n.params.id})):null;return Object(r.jsxs)("div",{className:"mainBody",children:[Object(r.jsxs)("header",{children:[Object(r.jsxs)("nav",{children:[Object(r.jsx)(i.b,{style:{padding:5},to:"/",children:Object(r.jsx)("strong",{children:"Home"})}),Object(r.jsx)("a",{href:"/feed.rss",target:"_blank",children:Object(r.jsx)("img",{src:D,width:"28",height:"28"})})]}),Object(r.jsx)("h1",{children:"Does AI dream of Hexadecimal Sheep?"}),Object(r.jsx)("h4",{children:"A blog for SPEAIT course"})]}),Object(r.jsx)("main",{children:Object(r.jsxs)(y.c,{children:[Object(r.jsx)(y.a,{path:"/createNew",children:Object(r.jsx)(S,{})}),Object(r.jsx)(y.a,{path:"/posts/:id",children:Object(r.jsx)(E,{post:a})}),Object(r.jsx)(y.a,{path:"/",children:Object(r.jsx)(w,{})})]})}),Object(r.jsx)("footer",{children:"For Tallinn university of Technology"})]})},_=n(12),C=n(35),L=n(36),B=Object(_.combineReducers)({posts:g,user:k}),F=Object(_.createStore)(B,Object(C.composeWithDevTools)(Object(_.applyMiddleware)(L.a)));n(67);s.a.render(Object(r.jsx)(i.a,{children:Object(r.jsx)(o.a,{store:F,children:Object(r.jsx)(P,{})})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.324360ec.chunk.js.map