(this.webpackJsonpspeait_front=this.webpackJsonpspeait_front||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n(18),s=n.n(a),o=n(10),i=n(12),u=n(3),l=n.n(u),j=n(5),d=n(39),h=n(15),b=n.n(h),p="/api/posts",O=null,m=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,b.a.post(p,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f={getAll:function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(p);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createPost:m,comment:function(){var e=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(p,"/").concat(t.id,"/comments"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){O="bearer ".concat(e)}},x=function(){return function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getAll();case 2:n=e.sent,t({type:"POSTS_INIT",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e,t){return function(){var n=Object(j.a)(l.a.mark((function n(r){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.comment(e,t);case 2:c=n.sent,r({type:"UPDATE",newPost:c});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POSTS_INIT":return t.data;case"CREATE":return[].concat(Object(d.a)(e),[t.postToAdd]);case"DELETE":return e.filter((function(e){return t.id!==e.id}));case"UPDATE":return e.map((function(e){return t.newPost.id!==e.id?e:t.newPost}));default:return e}},y=function(){var e=Object(o.b)();Object(c.useEffect)((function(){e(x())}),[e]);var t=Object(o.c)((function(e){return e.posts}));return Object(r.jsx)("div",{className:"postCollection",children:t.sort((function(e,t){return Date.parse(t.date)-Date.parse(e.date)})).map((function(e){var t=e.content.substring(0,30);return Object(r.jsxs)("div",{className:"postBody",children:[Object(r.jsx)("h3",{children:e.title}),Object(r.jsx)("h5",{children:e.date}),Object(r.jsxs)("p",{children:[t.substring(1),"... ",Object(r.jsx)(i.b,{to:"/posts/".concat(e.id),children:"show more"})]})]},e.id)}))})},w=n(4),T=n(21),N=n.n(T),k=function(e){var t=e.post,n=Object(o.b)();Object(c.useEffect)((function(){n(x())}),[n]);var a=function(){var e=Object(j.a)(l.a.mark((function e(r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),c=r.target.comment.value,a=r.target.author.value,r.target.author.value="",r.target.comment.value="",n(v(t,{text:c,author:a}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return void 0!==t?Object(r.jsxs)("div",{className:"postBody",children:[Object(r.jsxs)("div",{className:"postTitles",children:[Object(r.jsx)("h2",{children:t.title}),Object(r.jsx)("h3",{children:Object(r.jsxs)("em",{children:["By: ",t.author]})})]}),Object(r.jsx)("div",{className:"postContent",dangerouslySetInnerHTML:{__html:N()(t.content)}}),Object(r.jsx)("div",{className:"postComments",children:t.comments.map((function(e){return Object(r.jsxs)("div",{className:"commentBody",children:[Object(r.jsxs)("p",{className:"commentAuthor",children:[" ",e.author," Says: "]}),Object(r.jsx)("p",{className:"commentText",children:e.text},e.id)]},e.id)}))}),Object(r.jsxs)("form",{className:"postForm",onSubmit:a,children:["Your name: ",Object(r.jsx)("br",{})," ",Object(r.jsx)("input",{name:"author"}),"Comment: ",Object(r.jsx)("br",{}),Object(r.jsx)("textarea",{name:"comment"}),Object(r.jsx)("button",{type:"submit",children:" Comment "})]})]}):Object(r.jsx)("div",{children:Object(r.jsx)("img",{className:"loadingImage",src:"https://ichef.bbci.co.uk/news/976/cpsprodpb/41CF/production/_109474861_angrycat-index-getty3-3.jpg"})})},E="HEXADECIMAL_USERNAME",I="HEXADECIMAL_TOKEN",A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},S=n(40),_=function(e){var t=Object(c.useState)(""),n=Object(S.a)(t,2),r=n[0],a=n[1];return{type:e,value:r,onChange:function(e){a(e.target.value)},clear:function(){a("")}}},P=function(){var e=Object(o.c)((function(e){return e.user})),t=_("content"),n=_("title"),c="";e.username&&(c=e.username);return Object(r.jsxs)("div",{children:[Object(r.jsxs)("form",{className:"postForm",onSubmit:function(r){r.preventDefault();var a=t.value,s=n.value,o=e.token;t.clear(),n.clear();var i={content:a,title:s,author:c};f.setToken(o),f.createPost(i)},children:[Object(r.jsx)("input",{name:"title",onChange:n.onChange}),Object(r.jsx)("textarea",{name:"posttext",onChange:t.onChange}),Object(r.jsx)("button",{type:"submit",children:" Publish! "})]}),Object(r.jsxs)("div",{className:"postTitles",children:[Object(r.jsx)("h2",{children:n.value}),Object(r.jsx)("h3",{children:Object(r.jsxs)("em",{children:["By: ",c]})})]}),Object(r.jsx)("div",{dangerouslySetInnerHTML:{__html:N()(t.value)}})]})},C=n.p+"static/media/Feed-icon.1021a409.png",D=n.p+"static/media/pider_sheep.64aaa791.png",M=function(){return Object(r.jsxs)("div",{className:"postBody",children:[Object(r.jsx)("h2",{children:"Hello!"}),Object(r.jsx)("p",{children:"My name is Dachi Mshvidobadze - and this is my blog for SPEAIT - Social, Professional and Ethical Aspects of IT. And potentially - for other purposes as well"}),Object(r.jsxs)("p",{children:["I will write about various topics here - of course, related to that week's ",Object(r.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://wiki.itcollege.ee/index.php/E-SPEAIT",children:"material"})]}),Object(r.jsxs)("p",{children:["If you would like to see what it is I am doing here, you can take a look at: ",Object(r.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://github.com/M0rdhau/SPEAIT_FRONT",children:"Frontend"})," and ",Object(r.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://github.com/M0rdhau/speait_back",children:"Backend"})]})]})};var B=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.posts})),n={padding:5};Object(c.useEffect)((function(){e(function(){var e=window.localStorage.getItem(E),t=window.localStorage.getItem(I);return null!==e&&null!==t?{type:"LOGIN",data:{username:e,token:t}}:{type:"LOGOUT"}}())}),[e]);var a=Object(w.f)("/posts/:id"),s=a&&void 0!==t?t.find((function(e){return e.id===a.params.id})):null;return Object(r.jsxs)("div",{className:"mainBody",children:[Object(r.jsxs)("header",{children:[Object(r.jsxs)("nav",{children:[Object(r.jsxs)("div",{className:"actualNav",children:[Object(r.jsx)(i.b,{style:n,to:"/",children:Object(r.jsx)("strong",{children:"Home"})}),Object(r.jsx)(i.b,{style:n,to:"/about",children:Object(r.jsx)("strong",{children:"About"})})]}),Object(r.jsx)(i.b,{to:"/",children:Object(r.jsx)("img",{src:D,width:"128",height:"128"})}),Object(r.jsx)("a",{href:"/feed.rss",target:"_blank",children:Object(r.jsx)("img",{src:C,width:"28",height:"28"})})]}),Object(r.jsx)("h1",{children:"Does AI dream of Hexadecimal Sheep?"}),Object(r.jsx)("h4",{children:"A blog for SPEAIT course"})]}),Object(r.jsx)("main",{children:Object(r.jsxs)(w.c,{children:[Object(r.jsx)(w.a,{path:"/about",children:Object(r.jsx)(M,{})}),Object(r.jsx)(w.a,{path:"/createNew",children:Object(r.jsx)(P,{})}),Object(r.jsx)(w.a,{path:"/posts/:id",children:Object(r.jsx)(k,{post:s})}),Object(r.jsx)(w.a,{path:"/",children:Object(r.jsx)(y,{})})]})}),Object(r.jsx)("footer",{children:"For Tallinn university of Technology"})]})},L=n(13),F=n(37),H=n(38),U=Object(L.combineReducers)({posts:g,user:A}),G=Object(L.createStore)(U,Object(F.composeWithDevTools)(Object(L.applyMiddleware)(H.a)));n(70);s.a.render(Object(r.jsx)(i.a,{children:Object(r.jsx)(o.a,{store:G,children:Object(r.jsx)(B,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.dbc3a827.chunk.js.map